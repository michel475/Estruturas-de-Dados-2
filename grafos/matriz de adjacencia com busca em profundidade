#include <stdio.h>
#include <stdlib.h>

struct grafo{
	int **arestas;
	float **pesos;
	int *grau;
	int V;
};

typedef struct grafo *Grafo;

Grafo cgo(int v)
{
	Grafo g = (Grafo)malloc(sizeof(struct grafo));
	if(g != NULL)
	{
		g->arestas = (int**)malloc(v * sizeof(int*));
		g->pesos = (float**)malloc(v * sizeof(float*));
		g->grau = (int*)calloc(v, sizeof(int));
		g->V = v;
		int i, j;
		for(i=0; i<v; i++)
		{
			g->arestas[i] = (int*)malloc(v * sizeof(int));
			g->pesos[i] = (float*)malloc(v * sizeof(float));
			g->grau[i] = 0;
		}
		for(i=0; i<v; i++)
		{
			for(j=0; j<v; j++)
			{
				g->arestas[i][j] = 0;
				g->pesos[i][j] = 0;
			}
		}
	}
	return g;
}

int insera(Grafo g, int orig, int dest, float peso)
{
	if(g == NULL)
		return 0;
	if(orig < 0 || orig >= g->V || dest < 0 || dest >= g->V)
		return 0;
	if(g->arestas[orig][dest] == 1)
		return 0; // ja existe a aresta
	g->arestas[orig][dest] = 1;
	g->arestas[dest][orig] = 1;
	g->grau[orig]+=1;
	g->grau[dest]+=1;
	return 1;
}

int removera(Grafo g, int orig, int dest)
{
	if(g == NULL)
		return 0;
	if(orig < 0 || orig >= g->V || dest < 0 || dest>=g->V)
		return 0;
	if(g->arestas[orig][dest] == 0)
		return 0; //nao tem a aresta
	g->arestas[orig][dest] = 0;
	g->arestas[dest][orig] = 0;
	g->grau[orig]-=1;
	g->grau[dest]-=1;
	return 1;
}

int dfs_grafo(Grafo g, int orig, int dest)
{
	if(g == NULL)
		return 0;
	if(orig < 0 || orig >=g->V || dest < 0 || dest >= g->V)
		return 0;
	if(orig == dest)
		return 1;
	int pilha[g->V], topo=0, visitados[g->V], i;
	for(i=0; i<g->V; i++)
		visitados[i] = 0;
	pilha[topo++] = orig;
	while(topo > 0)
	{
		int visitado = pilha[--topo];
		if(g->arestas[visitado][dest] == 1)
			return 1;
		for(i=0; i<g->V; i++)
		{
			if(g->arestas[visitado][i] == 1 && !visitados[i])
			{
				visitados[i] = 1;
				pilha[topo++] = i;
			}
		}
	}
	return 0;
}

int main()
{
	Grafo g = cgo(6);
	insera(g, 1, 4, 6.6);
	insera(g, 0, 3, 6.6);
	insera(g, 0, 1, 6.6);
	insera(g, 0, 4, 6.6);
	if(dfs_grafo(g, 0, 2))
		printf("tem caminho\n");
	else
		printf("nao tem caminho\n");
}
